<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>何炜坤的主页</title>
  <style>

    body {
      margin: 0;
      font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
      background-color: #F0F0F0;
      color: #333;
    }

    /* 顶部个人信息区 */
.header {
  display: flex;
  align-items: center;    /* ← 关键：竖直居中 */
  max-width: 1600px;       /* 限制内容区最大宽度 */
  margin: 0 auto;          /* 居中 */
  padding: 35px;
  background: linear-gradient(to left, #000 0%, #808080 50%, #fff 100%);
}

.profile-pic img {
  margin-left: 150px;
  width: 200px;   /* 控制头像大小 */
  height: 200px;
  border-radius: 50%; /* 圆形头像 */
  object-fit: cover;
  margin-right:60px; /* 头像和文字之间留点间距 */
}

.intro h1 {
  margin: 0;
  font-size: 30px;
}

.intro p {
  margin: 5px 0;
  font-size: 18px;
  color: #2B2B2B;
}


.quote-section {
  text-align: center;
  font-size: 24px;
  font-weight: solid;
  font-style: italic;
  margin: 50px auto;
  max-width: 800px;
  color: #808080;   /* 字体颜色，可以调浅一点 */
  line-height: 1.6;
}


/*精选作品*/

/* 精选作品区域 */
.gallery-section {
  max-width: 1200px;
  margin: -20px auto;
  padding: 0 30px;          /* 左右留空，保证按钮可见 */
  position: relative; /* 按钮绝对定位参考 */
}

/* 图片滑动容器 */
.gallery-container {
  overflow: hidden;  /* 限制图片溢出整体容器 */
  height: 330px;
  margin-top: 30px;
}

/* 滑动轨道 */
.gallery-track {
  display: flex;
  transition: transform 0.5s ease;
}

/* 单个图片容器 */
.gallery-item {
  flex: 0 0 auto;
  width: 300px;        /* 每张图片宽度 */
  margin: 15px 30px;      /* 图片间距 */
  position: relative;
  overflow: visible;   /* 内部图片可以放大 */
}

/* 图片样式 */
.gallery-item img {
  width: 100%;
  object-fit: cover;
  border: 3px solid #000000;
  transition: transform 0.3s ease;
  display: block;
  cursor: pointer;
}

/* 鼠标悬停放大 */
.gallery-item img:hover {
  transform: scale(1.05); /* 放大 5% */
}



/* 按钮样式 */
.gallery-btn {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background: rgba(0,0,0,0.2);
  color: white;
  border: none;
  padding: 10px 10px;
  cursor: pointer;
  opacity: 1;
  transition: opacity 0.3s;
  z-index: 10;
}

/* 左右按钮位置在图片两侧，不挡图片 */
.gallery-btn.prev {
  left: 0px;  /* 可根据需要调整 */
}

.gallery-btn.next {
  right: 0px; /* 可根据需要调整 */
}

/* 不可点击时透明 */
.gallery-btn[disabled] {
  opacity: 0;
  cursor: default;
}
.gallery-btn:hover { background: rgba(0,0,0,0.6); }



/* 触控设备隐藏按钮 */
@media (hover: none) and (pointer: coarse) {
  .gallery-btn {
    display: none !important;
  }
}



    /* 分隔线 */
.section-divider {
  display: flex;
  align-items: center;
  justify-content: center;   /* 文字居中 */
  gap: 1rem;
  margin: 60px 0;
  color: #2B2B2B;
  font-weight: 600;
  max-width: 1200px;
  margin-left: auto;
  margin-right: auto;
  /* 不用 position:absolute，避免被 overflow 截断 */
}

.section-divider::before,
.section-divider::after {
  content: "";
  flex: 1;
  height: 1px;
  background: #ddd;
}

/* 文字块，使用背景色遮盖横线 */
.section-divider span {
  padding: 0 14px;
  background: #F0F0F0;   /* 如果该区域不是白色，把这里改成对应背景色 */
  z-index: 1;
  line-height: 1;
  font-size: 24px;
}


.about-section {
  max-width: 900px;    /* 控制文字宽度 */
  margin: 60px auto;   /* 上下留白，居中 */
  text-align: center;  /* 居中对齐 */
  line-height: 2.0;    /* 行距大一点，松弛感 */
  font-size: 18px;   /* 比正文稍大 */
  color: #808080;         /* 柔和字体颜色 */
}

.about-section h2 {
  margin-bottom: 20px;
  font-size: 18px;
  font-weight: 600;
}



    /* 分隔线 */
.section-divider {
  display: flex;
  align-items: center;
  justify-content: center;   /* 文字居中 */
  gap: 1rem;
  margin: 100px 0;
  color: #2B2B2B;
  font-weight: 600;
  max-width: 1200px;
  margin-left: auto;
  margin-right: auto;
  /* 不用 position:absolute，避免被 overflow 截断 */
}

.section-divider::before,
.section-divider::after {
  content: "";
  flex: 1;
  height: 1px;
  background: #ddd;
}

/* 文字块，使用背景色遮盖横线 */
.section-divider span {
  padding: 0 14px;
  background: #F0F0F0;   /* 如果该区域不是白色，把这里改成对应背景色 */
  z-index: 1;
  line-height: 1;
  font-size: 24px;
}





    /* 作品集 */
    .portfolio {
      max-width: 1200px;
      margin: 0 auto 60px;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      column-gap:80px;
      row-gap: 60px;
      padding: 0 20px;
      background-color:transparent;
      padding-bottom: 0px;
    }

    .portfolio-item {
      text-align: center;
    }

    .portfolio-item img {
      width: 100%;
      transition: transform 0.3s ease;
       aspect-ratio: 3 / 2;
      
  border: 2px solid #000000;  
    }

    .portfolio-item img:hover {
      transform: scale(1.05);
    }

    .portfolio-item p {
      margin: 8px 0 0;
      font-size: 16px;
      color: #808080;
    }




/* 整体区块，控制系列作品区域的宽度和居中 */
.series-section {
  max-width: 1200px;   /* 最大宽度 */
  margin: 80px auto;   /* 上下间距 80px，左右自动居中 */
  padding: 0 20px;     /* 左右留点内边距，避免贴边 */
}

/* 单个系列容器 */
.series {
  margin-bottom: 80px; /* 每个系列之间的空隙 */
}

/* 系列标题 */
.series-title {
  font-size: 24px;     /* 标题字号 */
  font-weight: bold;   /* 加粗 */
  color: #808080;
  margin-bottom: 30px; /* 标题和简介的间隔 */
  text-align: center;  /* 居中显示 */
}

/* 系列简介 */
.series-desc {
  font-size: 18px;
  color: #808080;         /* 灰色字体 */
  margin-bottom: 50px; /* 简介和组图之间的间隔 */
  text-align: center;  /* 居中显示 */
  line-height: 1.6;    /* 行高，让文字更舒展 */
}

/* 组图区域 */
.series-gallery {
  display: grid;                               /* 使用网格布局 */
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  /* 自动换行，每张最小 250px，最大占满一列 */
  column-gap:50px;
  row-gap: 30px;                                /* 图片间距 */
}

/* 组图里的每张图 */
.series-gallery img {
  width: 100%;              /* 图片宽度填满列 */
  aspect-ratio: 1;     
  object-fit: cover;        /* 裁剪填充，不变形 */
  transition: transform 0.3s ease;
  
  border: 2px solid #000000;  
}

/* 鼠标悬停时放大一点 */
.series-gallery img:hover {
  transform: scale(1.05);
}






    footer {
  text-align: center;
  padding: 20px;
  margin-top: 20px;
  background-color: #F0F0F0; /* 可以换成你网页底色，或去掉 */
  color: #808080;
  font-size: 0.8rem;
}

.footer-line {
  height: 1px;
  background-color: #ddd; /* 分割线颜色 */
  max-width: 1200px;
  margin: 0 auto 15px auto; /* 居中并和文字留间距 */
}

/* Lightbox 按钮样式 */
.lightbox .lb-btn {
  position: fixed;
  top: 50%;
  transform: translateY(-50%);
  z-index: 10020;
  background: rgba(0,0,0,0.5);
  color: #fff;
  border: none;
  font-size: 34px;
  padding: 10px 14px;
  border-radius: 6px;
  cursor: pointer;
  user-select: none;
  transition: background 0.2s;
}
.lightbox .lb-prev { left: 60px; }
.lightbox .lb-next { right: 60px; }
.lightbox .lb-btn:hover {
  background: rgba(0,0,0,0.8);
}
@media (hover: none) and (pointer: coarse){
  .lightbox .lb-btn {
    font-size: 26px;
    padding: 8px 10px;
  }
  .lightbox .lb-prev { left: 10px; }
  .lightbox .lb-next { right: 10px; }
}

.lb-inner {
  position: relative;
  text-align: center;
}
#lightbox-title {
  position: absolute;
  bottom: -40px;           /* 离图片底部 10px */
  left: 50%;
  transform: translateX(-50%);
  color: #ffffff;
  font-size: 20px;
  font-weight: 500;
  max-width: 90%;
  text-align: center;
  z-index: 10030;
  pointer-events: none;    /* 避免挡住按钮点击 */
}

.lightbox {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.85);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 10000;
}


.lightbox .close {
  position: fixed;   /* 固定在窗口，不跟随图片 */
  top: 30px;         /* 距离顶部 30px */
  right: 40px;       /* 距离右侧 40px */
  color: white;
  font-size: 40px;
  cursor: pointer;
  user-select: none;
  z-index: 10030;    /* 要比图片和按钮都高 */
}

.lightbox .close:hover {
  color: #ccc;
}


#lightbox-img {
  max-width: 90%;
  max-height: 80vh;
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.6);
  margin: 0 auto;
  transition: transform 0.3s ease, opacity 0.3s ease;
}



@media (hover: none) and (pointer: coarse) {

  #lightbox-title {
    bottom: -80px;
    font-size: 40px;
  }
  footer {
    font-size: 24px;
  }  
   .portfolio-item p {
      font-size: 40px;
    }

.section-divider span {
  font-size: 50px;
}

.about-section {
  font-size: 40px;  
}

.about-section h2 {
  font-size: 40px;
}
.section-divider span {
  font-size: 50px;
}

.intro h1 {
  font-size: 50px;
}

.intro p {
  margin: 10px 0;
  font-size: 40px;
}


.quote-section {
  font-size: 50px;
  margin: 80px auto;
}

.series-title {
  font-size: 40px; 
}

.series-desc {
  font-size: 40px;
}


.profile-pic img {
  margin-left: 0;
  width: 300px;   /* 控制头像大小 */
  height: 300px;
  margin-right:60px; /* 头像和文字之间留点间距 */
}

    

.gallery-item {
  width: 500px;        /* 每张图片宽度 */
}


    .portfolio {
      grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    }


.gallery-container {
  height: 550px;
}

.series-gallery {
  grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
}



.section-divider::before,
.section-divider::after {
  height: 4px;
}


.header {
  padding: 60px;
  background: #f0f0f0
}

.gallery-section {
  margin: 0px auto;
}

}


  </style>
</head>
<body>

  <!-- 顶部个人信息 -->
  <section class="intro">
   <div class="header">
  <div class="profile-pic">
    <img src="images/touxiang.jpg" alt="头像">
  </div>
  <div class="intro">
    <h1>何炜坤</h1>
    <p>摄影爱好者</p>
    <p>邮箱: weikunheweikun@gmail.com</p>
    <p>手机: +86 17338140709</p>
  </div>
</div>
  </section>


<section class="quote-section">
  <p>"让每个值得保留的瞬间都能被记录。"</p>
</section>

<!--精选作品-->
<section class="gallery-section">
  <button class="gallery-btn prev">‹</button>
  <div class="gallery-container">
    <div class="gallery-track">
      <div class="gallery-item"><img src="images/zuijin1.jpg" alt="" ></div>
      <div class="gallery-item"><img src="images/zuijin2.jpg" alt="" ></div>
      <div class="gallery-item"><img src="images/zuijin3.jpg" alt="" ></div>
      <div class="gallery-item"><img src="images/zuijin4.jpg" alt="" ></div>
      <div class="gallery-item"><img src="images/zuijin5.jpg" alt="" ></div>
      <div class="gallery-item"><img src="images/zuijin6.jpg" alt="" ></div>
      <!-- 添加更多图片 -->
    </div>
  </div>
  <button class="gallery-btn next">›</button>


</section>



  <!-- 分隔线 -->
  <div class="divider"></div>
  <div class="section-divider"><span>个人经历</span></div>





    <!-- 个人经历 -->
    <main class="about-section">
        <p>2001年：出生于福建漳州，于厦门长大</p>
        <p>2023年：第一次拿起相机，从此开始享受拍照的乐趣</p>
        <p>2025年：于医学院本科毕业，拍摄编辑组图《学校记忆》</p>
        <p>目前使用相机：理光GRⅢ，奥林巴斯OM2-SP</p>
    </div>
    </main>

  <!-- 分隔线 -->
  <div class="divider"></div>
  <div class="section-divider"><span>单张作品</span></div>




  <!-- 作品集 -->
  <section class="portfolio">
    <div class="portfolio-item">
      <img src="images/zuopin1.jpg" alt=""data-title="《无题》">
      <p>《无题》</p>
    </div>
    <div class="portfolio-item">
      <img src="images/zuopin2.jpg" alt=""data-title="《穿越》">
      <p>《穿越》</p>
    </div>
    <div class="portfolio-item">
      <img src="images/zuopin3.jpg" alt=""data-title="《梦》">
      <p>《梦》</p>
    </div>
    <div class="portfolio-item">
      <img src="images/zuopin4.jpg" alt=""data-title="《奇怪的影子》">
      <p>《奇怪的影子》</p>
    </div>
    <div class="portfolio-item">
      <img src="images/zuopin5.jpg" alt=""data-title="《无题》">
      <p>《无题》</p>
    </div>
    <div class="portfolio-item">
      <img src="images/zuopin6.jpg" alt=""data-title="《不稳定的楼》">
      <p>《不稳定的楼》</p>
    </div>
<div class="portfolio-item">
      <img src="images/zuopin7.jpg" alt=""data-title="《街角》">
      <p>《街角》</p>
    </div>
    <div class="portfolio-item">
      <img src="images/zuopin8.jpg" alt=""data-title="《迷惘》">
      <p>《迷惘》</p>
    </div>
    <div class="portfolio-item">
      <img src="images/zuopin9.jpg" alt=""data-title="《过节》">
      <p>《过节》</p>
    </div>

        <div class="portfolio-item">
      <img src="images/zuopin10.jpg" alt=""data-title="《买卖》">
      <p>《买卖》</p>
    </div>

 <div class="portfolio-item">
      <img src="images/zuopin11.jpg" alt=""data-title="《农民》">
      <p>《农民》</p>
    </div>
 <div class="portfolio-item">
      <img src="images/zuopin12.jpg" alt=""data-title="《吃早餐》">
      <p>《吃早餐》</p>
    </div>

  </section>

  
  
  <!-- 分隔线 -->
   
  <div class="divider"></div>
  <div class="section-divider"><span>系列作品</span></div>


<!-- 系列作品整体容器 -->
<section class="series-section">

  <!-- 第一组作品 -->
  <div class="series">
    <h2 class="series-title">《学校记忆》系列</h2> <!-- 系列标题 -->
    <p class="series-desc">这一系列拍摄于2025年，在毕业前夕留下一些关于学校的记忆。</p> <!-- 系列简介 -->

    <!-- 组图容器 -->
    <div class="series-gallery">
      <img src="images/xuexiao1.jpg" alt="">
      <img src="images/xuexiao2.jpg" alt="">
      <img src="images/xuexiao3.jpg" alt="">
      <img src="images/xuexiao4.jpg" alt="">
      <img src="images/xuexiao5.jpg" alt="">
      <img src="images/xuexiao6.jpg" alt="">
      <img src="images/xuexiao7.jpg" alt="">
      <img src="images/xuexiao8.jpg" alt="">
      <img src="images/xuexiao9.jpg" alt="">
    </div>
  </div>



</section>

<!-- 统一的 Lightbox -->
 <div id="lightbox" class="lightbox" style="display:none;">
  <div class="lb-overlay" style="position:absolute;inset:0;"></div>
  <span class="close">&times;</span>
  <span class="lb-btn lb-prev">&#10094;</span>
  <span class="lb-btn lb-next">&#10095;</span>
  <div class="lb-inner" role="dialog" aria-modal="true" style="position:relative;z-index:1;text-align:center;">
    <img id="lightbox-img" src="" alt="">
    <div id="lightbox-title"></div>
  </div>
</div>




<footer>
  <div class="footer-line"></div>
  <p>© 2025 Walter He. All rights reserved.</p>
</footer>

<script>(function () {
  const track = document.querySelector('.gallery-track');
  const prevBtn = document.querySelector('.gallery-btn.prev');
  const nextBtn = document.querySelector('.gallery-btn.next');
  const items = Array.from(document.querySelectorAll('.gallery-item'));
  const container = document.querySelector('.gallery-container');

  let currentIndex = 0;

  function updateGallery() {
    const style = getComputedStyle(items[0]);
    const marginLeft = parseFloat(style.marginLeft);
    const marginRight = parseFloat(style.marginRight);
    const itemWidth = items[0].getBoundingClientRect().width + marginLeft + marginRight;

    const containerWidth = container.getBoundingClientRect().width;
    const visibleCount = Math.floor(containerWidth / itemWidth);

    // 最大索引 = 总图片数 - 可见图片数
    const maxIndex = Math.max(0, items.length - visibleCount);

    // 限制 currentIndex
    if (currentIndex < 0) currentIndex = 0;
    if (currentIndex > maxIndex) currentIndex = maxIndex;

    // 平滑移动
    const offset = -currentIndex * itemWidth;
    track.style.transform = `translateX(${offset}px)`;

    // 按钮状态
    prevBtn.disabled = currentIndex === 0;
    nextBtn.disabled = currentIndex === maxIndex;
  }

  prevBtn.addEventListener('click', () => {
    currentIndex--;
    updateGallery();
  });

  nextBtn.addEventListener('click', () => {
    currentIndex++;
    updateGallery();
  });

  window.addEventListener('resize', updateGallery);
  window.addEventListener('load', updateGallery);

  updateGallery();
})();


</script>


<script>
 (function () {
  const track = document.querySelector('.gallery-track');
  const prevBtn = document.querySelector('.gallery-btn.prev');
  const nextBtn = document.querySelector('.gallery-btn.next');
  const items = Array.from(document.querySelectorAll('.gallery-item'));
  const container = document.querySelector('.gallery-container');

  let currentTranslate = 0;   // 当前位移
  let prevTranslate = 0;      // 上一次位移
  let startX = 0;             // touchstart 初始位置
  let isDragging = false;
  let animationID;

  // 获取每张图片宽度 + 间距
  function getItemWidth() {
    const style = getComputedStyle(items[0]);
    const marginLeft = parseFloat(style.marginLeft);
    const marginRight = parseFloat(style.marginRight);
    return items[0].getBoundingClientRect().width + marginLeft + marginRight;
  }

  // 最大可移动距离
  function getMaxTranslate() {
    const itemWidth = getItemWidth();
    const containerWidth = container.getBoundingClientRect().width;
    const totalWidth = itemWidth * items.length;
    return Math.max(0, totalWidth - containerWidth);
  }

  // 设置 transform
  function setSliderPosition() {
    track.style.transform = `translateX(${currentTranslate}px)`;
  }

  function animation() {
    setSliderPosition();
    if (isDragging) requestAnimationFrame(animation);
  }

  // touch 开始
  function touchStart(e) {
    startX = e.touches[0].clientX;
    isDragging = true;
    track.style.transition = 'none';
    animationID = requestAnimationFrame(animation);
  }

  // touch 移动
  function touchMove(e) {
    if (!isDragging) return;
    const currentX = e.touches[0].clientX;
    let diff = currentX - startX;
    let nextTranslate = prevTranslate + diff;

    // 阻尼处理：超出左边界或右边界时减半移动距离
    const maxTranslate = getMaxTranslate();
    if (nextTranslate > 0) {
      nextTranslate *= 0.3;  // 左边界阻尼
    } else if (Math.abs(nextTranslate) > maxTranslate) {
      nextTranslate = -maxTranslate + (nextTranslate + maxTranslate) * 0.3; // 右边界阻尼
    }

    currentTranslate = nextTranslate;
  }

  // touch 结束
 function touchEnd() {
  isDragging = false;
  cancelAnimationFrame(animationID);

  const maxTranslate = getMaxTranslate();

  // 超出左边界
  if (currentTranslate > 0) {
    currentTranslate = 0;
  } 
  // 超出右边界
  else if (Math.abs(currentTranslate) > maxTranslate) {
    currentTranslate = -maxTranslate;
  }

  prevTranslate = currentTranslate;

  track.style.transition = 'transform 0.3s ease'; // 平滑回弹
  setSliderPosition();
}


  // 桌面端按钮滑动（可选）
  if (prevBtn && nextBtn) {
    prevBtn.addEventListener('click', () => {
      const itemWidth = getItemWidth();
      currentTranslate = Math.min(prevTranslate + itemWidth, 0); // 不超左边界
      prevTranslate = currentTranslate;
      track.style.transition = 'transform 0.5s ease';
      setSliderPosition();
    });

    nextBtn.addEventListener('click', () => {
      const itemWidth = getItemWidth();
      const maxTranslate = getMaxTranslate();
      currentTranslate = Math.max(prevTranslate - itemWidth, -maxTranslate); // 不超右边界
      prevTranslate = currentTranslate;
      track.style.transition = 'transform 0.5s ease';
      setSliderPosition();
    });
  }

  // 事件绑定
  container.addEventListener('touchstart', touchStart);
  container.addEventListener('touchmove', touchMove);
  container.addEventListener('touchend', touchEnd);

  window.addEventListener('resize', () => {
    // resize 后确保不超边界
    const maxTranslate = getMaxTranslate();
    if (Math.abs(currentTranslate) > maxTranslate) {
      currentTranslate = -maxTranslate;
      prevTranslate = currentTranslate;
      track.style.transition = 'transform 0.5s ease';
      setSliderPosition();
    }
  });

  // 初始化
  currentTranslate = 0;
  prevTranslate = 0;
  setSliderPosition();
})();

</script>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const lightbox = document.getElementById('lightbox');
  const lbImg = document.getElementById('lightbox-img');
  const lbClose = lightbox.querySelector('.close');
  const lbOverlay = lightbox.querySelector('.lb-overlay');
  const btnPrev = lightbox.querySelector('.lb-prev');
  const btnNext = lightbox.querySelector('.lb-next');

  let currentGroup = [];
  let currentIndex = 0;

  function bindSelector(selector) {
    const nodes = Array.from(document.querySelectorAll(selector));
    nodes.forEach((imgEl, i) => {
      imgEl.style.cursor = 'zoom-in';
      imgEl.addEventListener('click', () => openLightbox(i, nodes));
    });
  }

  bindSelector('.gallery-item img');
  bindSelector('.portfolio-item img');
  bindSelector('.series-gallery img');
function preventScroll(e) {
  e.preventDefault();
}

function openLightbox(index, group) {
  currentGroup = group;
  currentIndex = index;
  showImage();
  lightbox.style.display = 'flex';
  document.body.style.overflow = 'hidden';
  
  // 阻止背景滑动
  document.addEventListener('touchmove', preventScroll, { passive: false });
}

function closeLightbox() {
  lightbox.style.display = 'none';
  document.body.style.overflow = '';
  
  // 恢复背景滑动
  document.removeEventListener('touchmove', preventScroll, { passive: false });
  
  lbImg.src = '';
}

 function showImage() {
  lbImg.src = currentGroup[currentIndex].dataset.full || currentGroup[currentIndex].src;

  // 获取标题
  const title = currentGroup[currentIndex].dataset.title || "";
  document.getElementById("lightbox-title").textContent = title;
}


  function changeSlide(step) {
    if (!currentGroup.length) return;
    const newIndex = currentIndex + step;
    if (newIndex < 0 || newIndex >= currentGroup.length) return;

    const img = lbImg;
    img.style.transform = `translateX(${-step * 80}px)`;
    img.style.opacity = "0";

    setTimeout(() => {
      currentIndex = newIndex;
      
      showImage();
      img.src = currentGroup[currentIndex].dataset.full || currentGroup[currentIndex].src;

      img.style.transition = "none";
      img.style.transform = `translateX(${step * 80}px)`;
      img.style.opacity = "0";

      setTimeout(() => {
        img.style.transition = "transform 0.3s ease, opacity 0.3s ease";
        img.style.transform = "translateX(0)";
        img.style.opacity = "1";
      }, 50);
    }, 300);
  }

  btnPrev.addEventListener("click", () => changeSlide(-1));
  btnNext.addEventListener("click", () => changeSlide(1));
  lbClose.addEventListener("click", closeLightbox);
  lbOverlay.addEventListener("click", closeLightbox);

  document.addEventListener("keydown", e => {
    if (lightbox.style.display !== 'flex') return;
    if (e.key === "Escape") closeLightbox();
    if (e.key === "ArrowLeft") changeSlide(-1);
    if (e.key === "ArrowRight") changeSlide(1);
  });

  // 手机滑动
  let startX = 0;
  lightbox.addEventListener("touchstart", e => startX = e.touches[0].clientX);
  lightbox.addEventListener("touchend", e => {
    const diff = e.changedTouches[0].clientX - startX;
    if (Math.abs(diff) > 50) changeSlide(diff > 0 ? -1 : 1);
  });
});

</script>

</body>
</html>


